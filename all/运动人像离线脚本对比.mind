{"root":{"data":{"id":"d5j38a5brog0","created":1731301693659,"text":"motion portrait离线脚本","expandState":"expand"},"children":[{"data":{"id":"d5j38jn1ngo0","created":1731301714321,"text":"02_make_train_data_ft.py","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j391o2xg80","created":1731301753566,"text":"160000","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j39eag8kg0","created":1731301781040,"text":"base","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"d5j39gwjjeo0","created":1731301786729,"text":"03_make_train_data_ft_supplement_p2.py","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4hca0td40","created":1731305224684,"text":"12800","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4jmnqvnc0","created":1731305404010,"text":"高亮度场景","background":"#b8cce4","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j4tuus43c0","created":1731306205491,"text":"参数变化","expandState":"expand","layout":null},"children":[{"data":{"id":"d5j4o66vtg00","created":1731305759983,"text":"iso、ev值域变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4ivsmjbk0","created":1731305345532,"text":"iso：50-500 (base: 50-3600)\nev_es: 5-6.25 (base: 2-5)\nev_s:1-3 (和base一致)","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j4n1i9cqw0","created":1731305671422,"text":"过曝概率加大","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4n5t1gz40","created":1731305680781,"text":"base0.4-->0.7(refframe_overexp_ratio)","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"d5j4u2iqd5c0","created":1731306222177,"text":"操作变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4sme1r400","created":1731306108701,"text":"删除 不过曝时add_color_patch_bl","layout":null,"expandState":"expand"},"children":[]}]}]}]},{"data":{"id":"d5j4y3as07c0","created":1731306537329,"text":"04_make_train_data_ghost_motion_blur_supplement.py","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j4yrnnf000","created":1731306590350,"text":"64000","expandState":"expand","layout":null},"children":[{"data":{"id":"d5j597bwz4g0","created":1731307408111,"text":"非过曝运动场景","background":"#b8cce4","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j50bd7w9c0","created":1731306711619,"text":"参数变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j50dv4c1k0","created":1731306717055,"text":"ev值域变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j50gdawyo0","created":1731306722508,"text":"ev_es: 2-6","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j51pel9340","created":1731306820541,"text":"参考帧过曝概率为0","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j5jervecg0","created":1731308207955,"text":"高斯模糊的simga变小，s帧更清晰","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5lrs9as80","created":1731308393005,"text":"base: 0.55-->np.random.choice([0.3, 0.45])","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5lalit0g0","created":1731308355592,"text":"运动场景只能从s帧和双曝帧中得到信息,需要s帧比较清晰","layout":null},"children":[]}]}]}]},{"data":{"id":"d5j5c5hunnc0","created":1731307639209,"text":"操作变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5c79cu000","created":1731307643049,"text":"对双曝帧（idx=1）加运动模糊","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5cfyqasg0","created":1731307661997,"text":"卷上一个随机挑选的psf","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j5fqppcbk0","created":1731307920489,"text":"对除参考帧和双曝帧外的其他帧都用鬼影替代整个patch，其中0.3概率用ghost_patch_list[0]，0.7概率用ghost_patch_list[idx-1]","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5grf1kwo0","created":1731308000385,"text":"运动状态下，除第一帧N帧外其余非参考帧都（大概率）是运动鬼影","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j5ha7j7vk0","created":1731308041290,"text":"对除双曝帧之外的n帧也加上es帧非过曝鬼影策略","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j5jlkjvps0","created":1731308222750,"text":"只对s帧加高斯模糊","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5kgcmt800","created":1731308289751,"text":"其他帧都是鬼影，双曝帧加了运动模糊","layout":null,"expandState":"expand"},"children":[]}]}]}]}]},{"data":{"id":"d5j5ruyr7lk0","created":1731308870113,"text":"05_make_train_data_colorpatch_supplement.py","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5tqbor8o0","created":1731309016739,"text":"12800","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5u4rtork0","created":1731309048190,"text":"暗场景","background":"#b8cce4","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j5ucj0fag0","created":1731309065071,"text":"参数变化","expandState":"expand","layout":null},"children":[{"data":{"id":"d5j5vjv5uqg0","created":1731309159408,"text":"iso值域变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5vupkpk00","created":1731309183015,"text":"iso: 50-6400","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j5v6m60ko0","created":1731309130566,"text":"参考帧过曝概率为0","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j5y668fmw0","created":1731309364695,"text":"add_color_patch_bl","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j5z2tman40","created":1731309435766,"text":"概率变为1","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j5z4pcgv40","created":1731309439861,"text":"color_patch的值域变为1-5（base:1-10）","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j60v1ja4o0","created":1731309575559,"text":"亮度除以ev_s","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6114nu5c0","created":1731309588808,"text":"base: 除以ev_n","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"d5j694rnmjk0","created":1731310223642,"text":"经验上的处理，希望让不过曝数据不会被压得太暗，就除以 ev_s；反之则除以ev_n","layout":null},"children":[]}]}]},{"data":{"id":"d5j5ze93c5c0","created":1731309460646,"text":"0.5的概率在原始patch上加上color_patch,\n0.5的概率将整个patch替换为color_patch","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j6a8j13d40","created":1731310310192,"text":"高斯模糊核的sigma","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6ahcm1k80","created":1731310329395,"text":"base:0.55-->0.5","layout":null,"expandState":"expand"},"children":[]}]}]},{"data":{"id":"d5j5udvx04g0","created":1731309068029,"text":"操作变化","expandState":"expand","layout":null},"children":[{"data":{"id":"d5j67nc7uag0","created":1731310107339,"text":"删除 非过曝es帧鬼影","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j67rbe4ao0","created":1731310115997,"text":"暗区需要融es帧","layout":null,"expandState":"expand"},"children":[]}]}]}]}]},{"data":{"id":"d5j6d7jadpc0","created":1731310543123,"text":"07_make_train_data_under_exp_ghost.py","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6jxwxgfc0","created":1731311070729,"text":"25600","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6k2xg6880","created":1731311081645,"text":"非过曝鬼影场景","background":"#b8cce4","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j6l2t8cwo0","created":1731311159754,"text":"参数变化","expandState":"expand","layout":null},"children":[{"data":{"id":"d5j6lgxideo0","created":1731311190488,"text":"ev_es值域变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6lmguqaw0","created":1731311202541,"text":"base: 2-5-->1-5.75","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6m1lyew80","created":1731311235501,"text":"ev_es范围变大","layout":null},"children":[]}]}]},{"data":{"id":"d5j6mnbknug0","created":1731311282763,"text":"参考帧过曝概率为0","layout":null,"expandState":"expand"},"children":[]},{"data":{"id":"d5j76k3p66o0","created":1731312843040,"text":"add_color_patch，颜色范围调整，概率调整","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j76y4lhf40","created":1731312873569,"text":"颜色范围base: 最亮通道200-225-->100-145\n概率base: [0.15, 0.45, 0.6, 0.8]-->[0.3, 0.5, 0.8, 0.9]","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5j74iuweps0","created":1731312683602,"text":"make_sure_ref_frame_not_over_exp","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j74rapxhs0","created":1731312701973,"text":"base: 训练数据直接除以ev_n-->0.5的概率除以ev_s, 0.5的概率除以ev_n","layout":null,"expandState":"expand"},"children":[]}]},{"data":{"id":"d5jaxd6w8c80","created":1731323407158,"text":"（参考帧）非过曝N帧鬼影：base: 0.1概率且不包括双曝帧-->双曝帧以0.7概率变为ghost_patch, 其他N帧以0.9概率变为ghost_patch","expandState":"expand"},"children":[]},{"data":{"id":"d5jaz1f7ruo0","created":1731323538268,"text":"非过曝es帧鬼影：base: 0.2概率有es帧鬼影且0.7概率亮度高于参考帧-->0.8概率有es帧鬼影且百分百亮度高于参考帧","expandState":"expand"},"children":[]},{"data":{"id":"d5jb6x8j4a80","created":1731324156070,"text":"高斯模糊卷积核sigma: base 0.55-->0.4"},"children":[]}]},{"data":{"id":"d5j6l46dp9s0","created":1731311162726,"text":"操作变化","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6ovk3e340","created":1731311457421,"text":"对ghost_patch_list进行调整: adj_ghost_patch_list","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6ssxevd40","created":1731311765152,"text":"生成一个不过曝color patch，亮度对齐patch_rgb_patch_big后再乘上随机扰动","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6tgs30pk0","created":1731311817073,"text":"color_patch *= patch_rgb_patch_big.mean() / color_patch.mean() * np.random.uniform(0.25, 4.0)","layout":null},"children":[]}]},{"data":{"id":"d5j6p2xrl2g0","created":1731311473485,"text":"对ghost_patch_list中每张ghost做操作","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j6rh9x85s0","created":1731311661423,"text":"0.3概率直接将ghost_patch_list替换为color_patch","layout":null},"children":[]},{"data":{"id":"d5j6rv766vs0","created":1731311691732,"text":"0.2概率将ghost_patch_list替换为 (ghost_patch_list+color_patch)/2","layout":null},"children":[]}]}]},{"data":{"id":"d5j4sme1r400","created":1731306108701,"text":"删除 不过曝时add_color_patch_bl","layout":null,"expandState":"expand"},"children":[{"data":{"id":"d5j798zwkhs0","created":1731313053958,"text":"color_patch_bl的目的是提高网络应对暗区的能力，在base脚本数据中已经有体现","layout":null,"expandState":"expand"},"children":[]}]}]}]}]},{"data":{"id":"d5jb7z4tc080","created":1731324238563,"text":"08_make_train_data_motion_ghost_dark.py","layout_right_offset":{"x":-46,"y":0}},"children":[{"data":{"id":"d5jb902ckg80","created":1731324318954,"text":"25600"},"children":[{"data":{"id":"d5jb9gt4t0w0","created":1731324355403,"text":"运动鬼影暗场景","background":"#b8cce4"},"children":[]},{"data":{"id":"d5jbah9m1fk0","created":1731324434763,"text":"参数变化"},"children":[{"data":{"id":"d5jbb3o92s00","created":1731324483538,"text":"iso、ev值域"},"children":[{"data":{"id":"d5jbb7i24680","created":1731324491870,"text":"iso: 50-6400, ev_es: 2-3.5, ev_s: 2-4.5"},"children":[]}]},{"data":{"id":"d5jbbwxtonk0","created":1731324547243,"text":"参考帧过曝概率为0"},"children":[]},{"data":{"id":"d5jbkh908940","created":1731325218368,"text":"ghost_patch_list亮度控制"},"children":[{"data":{"id":"d5jbkp57o6w0","created":1731325235553,"text":"base: ghost_patch_list[i] = ghost_patch_list[i] / divde_num\n-->ghost_patch_list[i] *= patch_gain"},"children":[{"data":{"id":"d5jbl1dd2eo0","created":1731325262167,"text":"patch_gain = np.mean(patch_rgb_patch_big) / np.mean(ghost_patch_list[0])\n调整 ghost patch0 与 patch_rgb_patch_big 亮度接近，增加网络区分难度"},"children":[]}]}]},{"data":{"id":"d5jb6x8j4a80","created":1731324156070,"text":"高斯模糊卷积核sigma: base 0.55-->0.4"},"children":[]}]},{"data":{"id":"d5jbakhic740","created":1731324441771,"text":"操作变化"},"children":[{"data":{"id":"d5jbfhqociw0","created":1731324827616,"text":"color_patch_bl"},"children":[{"data":{"id":"d5jbi8c0kkw0","created":1731325042231,"text":"color_patch取值改变，变为偏灰色块"},"children":[]},{"data":{"id":"d5jbhis2qtc0","created":1731324986606,"text":"方式改变"},"children":[{"data":{"id":"d5jbgh1uyjc0","created":1731324904479,"text":"从在初始patch上加一块色块，变为在初始patch上叠加色块：\npatch_rgb_patch_big = (1.0 - dark_ratio) * patch_rgb_patch_big + dark_ratio * color_patch，\n其中dark_ratio为0.5,0.7,0.85,0.95中的随机值"},"children":[{"data":{"id":"d5jbiqmno4w0","created":1731325082056,"text":"模拟暗场景"},"children":[]}]}]},{"data":{"id":"d5jbhngv6y80","created":1731324996812,"text":"概率为1，必加"},"children":[]}]},{"data":{"id":"d5jbpsz03200","created":1731325635705,"text":"N/es帧鬼影"},"children":[{"data":{"id":"d5jbq10vlt40","created":1731325653233,"text":"除双曝帧外都用鬼影替代，其中0.8概率为ghost_patch_list[0], 0.2概率为ghost_patch_list[idx-1]"},"children":[{"data":{"id":"d5jbrl5cx5c0","created":1731325775404,"text":"运动状态下，除第一帧N帧外其余非参考帧都（大概率）是运动鬼影"},"children":[]}]}]}]}]}]},{"data":{"id":"d5jbthp2y880","created":1731325924618,"text":"09_make_train_data_banding.py"},"children":[{"data":{"id":"d5jbtvnxl280","created":1731325955023,"text":"6400"},"children":[{"data":{"id":"d5jbufx6c7s0","created":1731325999118,"text":"参数变化"},"children":[{"data":{"id":"d5jc060x4xc0","created":1731326447761,"text":"iso值域"},"children":[{"data":{"id":"d5jc0aw15480","created":1731326458350,"text":"50-6400"},"children":[]}]},{"data":{"id":"d5jc0r0fezk0","created":1731326493444,"text":"参考帧过曝概率为0"},"children":[]},{"data":{"id":"d5jc1i4sheo0","created":1731326552481,"text":"color_patch_bl"},"children":[{"data":{"id":"d5jc1rsdup40","created":1731326573498,"text":"值域：base:1-10-->1-20"},"children":[]},{"data":{"id":"d5jc21wxhy00","created":1731326595541,"text":"分支主题"},"children":[]}]}]}]}]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}